@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    overflow-x: hidden;
    overflow-y: auto;
    scroll-behavior: auto;
    min-height: 100vh;
  }

  body {
    @apply bg-ffxiv-dark text-white;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
      sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    overflow-y: auto;
    min-height: 100vh;
    background-image: 
      radial-gradient(circle at 20% 30%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
      radial-gradient(circle at 80% 70%, rgba(236, 72, 153, 0.12) 0%, transparent 50%),
      radial-gradient(circle at 50% 50%, rgba(59, 130, 246, 0.08) 0%, transparent 60%),
      radial-gradient(circle at 10% 80%, rgba(168, 85, 247, 0.1) 0%, transparent 40%);
    background-attachment: fixed;
  }

  #root {
    position: relative;
    min-height: 100vh;
  }

  * {
    @apply border-gray-700;
  }
}

@layer utilities {
  .bg-ffxiv-dark {
    background-color: #0f172a;
  }
  
  .bg-ffxiv-blue {
    background-color: #1e3a5f;
  }
  
  .bg-ffxiv-purple {
    background-color: #6b21a8;
  }
  
  .bg-ffxiv-gold {
    background-color: #fbbf24;
  }
  
  .bg-ffxiv-accent {
    background-color: #8b5cf6;
  }
  
  .text-ffxiv-gold {
    color: #fbbf24;
  }
  
  .text-ffxiv-accent {
    color: #a78bfa;
  }
  
  .border-ffxiv-gold {
    border-color: #fbbf24;
  }
  
  .border-ffxiv-accent {
    border-color: #8b5cf6;
  }

  /* Fantasy game-style effects */
  .glow-gold {
    box-shadow: 0 0 10px rgba(251, 191, 36, 0.4), 0 0 20px rgba(251, 191, 36, 0.15);
  }

  .glow-blue {
    box-shadow: 0 0 10px rgba(139, 92, 246, 0.4), 0 0 20px rgba(139, 92, 246, 0.15);
  }

  .card-glow {
    box-shadow: 
      0 4px 6px rgba(0, 0, 0, 0.3),
      0 0 20px rgba(251, 191, 36, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }

  .text-glow {
    text-shadow: 0 0 10px rgba(251, 191, 36, 0.6);
  }
}

/* Custom scrollbar - fantasy style */
::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}

::-webkit-scrollbar-track {
  background: #0f172a;
  border-left: 1px solid rgba(139, 92, 246, 0.15);
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #8b5cf6 0%, #ec4899 50%, #6366f1 100%);
  border-radius: 6px;
  border: 2px solid #0f172a;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, #a78bfa 0%, #f472b6 50%, #818cf8 100%);
  box-shadow: 0 0 10px rgba(251, 191, 36, 0.4);
}

/* Smooth animations */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.animate-fadeIn {
  animation: fadeIn 0.3s ease-out;
}

.animate-shimmer {
  animation: shimmer 2s infinite;
  background: linear-gradient(
    90deg,
    rgba(251, 191, 36, 0.15) 0%,
    rgba(139, 92, 246, 0.3) 50%,
    rgba(251, 191, 36, 0.15) 100%
  );
  background-size: 1000px 100%;
}

/* Crafting tree button soft pulse animation */
@keyframes craftingPulse {
  0%, 100% {
    box-shadow: 0 0 8px rgba(167, 139, 250, 0.3), 0 0 16px rgba(139, 92, 246, 0.15);
    border-color: rgba(167, 139, 250, 0.4);
  }
  50% {
    box-shadow: 0 0 12px rgba(251, 191, 36, 0.35), 0 0 24px rgba(251, 191, 36, 0.2);
    border-color: rgba(251, 191, 36, 0.5);
  }
}

/* Price comparison badge pulse animation */
@keyframes pricePulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

/* Shimmer effect for crafting button */
@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(200%);
  }
}

/* Table hover effects */
table tbody tr {
  transition: all 0.2s ease;
}

table tbody tr:hover {
  background: linear-gradient(90deg, rgba(139, 92, 246, 0.2) 0%, rgba(236, 72, 153, 0.15) 50%, rgba(99, 102, 241, 0.2) 100%);
  transform: translateX(2px);
  box-shadow: -2px 0 8px rgba(251, 191, 36, 0.3);
}

/* Button effects */
button {
  transition: all 0.2s ease;
}

button:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

button:active {
  transform: translateY(0);
}

/* Input focus effects */
input:focus {
  box-shadow: 
    0 0 0 3px rgba(251, 191, 36, 0.15),
    0 0 20px rgba(139, 92, 246, 0.3);
}

/* Card effects */
.card-fantasy {
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(236, 72, 153, 0.15) 50%, rgba(99, 102, 241, 0.2) 100%);
  border: 1px solid rgba(251, 191, 36, 0.25);
  box-shadow: 
    0 8px 16px rgba(0, 0, 0, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.1),
    0 0 30px rgba(251, 191, 36, 0.15);
  backdrop-filter: blur(10px);
}

/* Image shatter effect */
@keyframes shatter {
  0% {
    opacity: 1;
    transform: translate(0, 0) rotate(0deg) scale(1);
  }
  100% {
    opacity: 0;
    transform: translate(var(--tx), var(--ty)) rotate(var(--rot)) scale(0.8);
  }
}

.image-shatter-container {
  position: relative;
  display: inline-block;
  width: fit-content;
  height: fit-content;
}

.image-shatter-fragment {
  position: absolute;
  top: 0;
  left: 0;
  width: var(--fragment-width);
  height: var(--fragment-height);
  background-image: var(--image-url);
  background-size: var(--image-width) var(--image-height);
  background-position: var(--bg-x) var(--bg-y);
  background-repeat: no-repeat;
  animation: shatter 0.8s ease-out forwards;
  pointer-events: none;
  z-index: 10;
  border: 0.5px solid rgba(0, 0, 0, 0.1);
}

.image-shatter-main {
  transition: opacity 0.3s ease;
  position: relative;
  z-index: 1;
}

.image-shatter-main.shattering {
  opacity: 0;
}

/* 1. Fix the rotation animation to keep it centered */
@keyframes rotate {
  from {
    transform: translate(-50%, -50%) rotate(0deg);
  }
  to {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

/* 2. Rotating flow effect for confirm button - matches selected server button style */
.confirm-button-attention {
  position: relative;
  min-width: 0; /* Allow button to shrink */
  width: 100%; /* Take full width on small screens */
  padding: 0.75rem 1rem; /* Smaller padding on mobile */
  border: 1px solid #fbbf24; /* border-ffxiv-gold - lighter yellow border */
  border-radius: 0.5rem; /* rounded-lg */
  background: #0f172a; /* Dark base for the rotating effect to show through */
  cursor: pointer;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  font-weight: 600; /* font-semibold */
  color: #fbbf24; /* text-ffxiv-gold */
  box-shadow: 0 0 10px rgba(212, 175, 55, 0.3); /* shadow-[0_0_10px_rgba(212,175,55,0.3)] */
}

/* Responsive adjustments for larger screens */
@media (min-width: 640px) {
  .confirm-button-attention {
    width: auto;
    min-width: fit-content;
    padding: 0.75rem 1.5rem; /* Restore original padding on larger screens */
  }
}

.confirm-button-attention:hover {
  box-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
  border-color: #fbbf24;
}

.confirm-button-attention:active {
  transform: translateY(0);
}

/* The Rotating Light Layer - creates flowing shine effect */
.confirm-button-attention::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 300px;
  height: 300px;
  background: conic-gradient(
    transparent 0deg,
    transparent 240deg,
    rgba(251, 191, 36, 0.4) 260deg,
    rgba(251, 191, 36, 0.8) 270deg,
    rgba(255, 255, 255, 1) 285deg,
    rgba(251, 191, 36, 0.8) 300deg,
    rgba(251, 191, 36, 0.4) 310deg,
    transparent 330deg,
    transparent 360deg
  );
  animation: rotate 2.5s linear infinite;
  z-index: 0;
  pointer-events: none;
}

/* Button face with darker inner background - matches selected server button style */
.confirm-button-attention::after {
  content: '';
  position: absolute;
  inset: 2px; /* Inside the border - allows rotating light to show through edges */
  /* Opaque colors that match the visual appearance of selected server button */
  /* Equivalent to rgba(251, 191, 36, 0.3) and rgba(251, 191, 36, 0.2) over #0f172a */
  background: linear-gradient(to right, 
    rgb(86, 73, 40),   /* from-ffxiv-gold/30 over dark */
    rgb(62, 57, 41)    /* from-ffxiv-gold/20 over dark */
  );
  border-radius: calc(0.5rem - 2px);
  z-index: 1;
  pointer-events: none;
}

/* Ensure text is on top */
.confirm-button-attention span {
  position: relative;
  z-index: 2;
  color: #fbbf24; /* text-ffxiv-gold */
  font-weight: 600; /* font-semibold */
  white-space: normal; /* Allow text wrapping on small screens */
  word-wrap: break-word;
  text-align: center;
  font-size: 0.875rem; /* Smaller text on mobile (text-sm) */
}

/* Allow inner flex container to wrap on small screens */
.confirm-button-attention > span {
  flex-wrap: wrap;
  justify-content: center;
}

/* Responsive adjustments for larger screens */
@media (min-width: 640px) {
  .confirm-button-attention span {
    white-space: nowrap;
    font-size: 1rem; /* Restore normal size on larger screens */
  }
  
  .confirm-button-attention > span {
    flex-wrap: nowrap;
  }
}

/* Rotating light effect for server box (without button-specific styles) */
.server-box-rotating-light {
  position: relative;
  overflow: hidden;
}

.server-box-rotating-light::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 300px;
  height: 300px;
  background: conic-gradient(
    transparent 0deg,
    transparent 240deg,
    rgba(251, 191, 36, 0.4) 260deg,
    rgba(251, 191, 36, 0.8) 270deg,
    rgba(255, 255, 255, 1) 285deg,
    rgba(251, 191, 36, 0.8) 300deg,
    rgba(251, 191, 36, 0.4) 310deg,
    transparent 330deg,
    transparent 360deg
  );
  animation: rotate 2.5s linear infinite;
  z-index: 0;
  pointer-events: none;
  transform: translate(-50%, -50%);
}

/* Hide rotating light behind box content - only visible at border edges */
/* Uses opaque background like confirm-button-attention to completely hide the light */
.server-box-rotating-light::after {
  content: '';
  position: absolute;
  inset: 1px; /* Leave 1px border area for light to show through */
  /* Opaque colors that match the box background gradient appearance */
  /* Equivalent to rgba(251, 191, 36, 0.2) and rgba(234, 179, 8, 0.15) over dark base #0f172a */
  background: linear-gradient(to bottom right, 
    rgb(60, 54, 38),   /* from-ffxiv-gold/20 over dark */
    rgb(58, 52, 36),   /* via-yellow-500/15 over dark */
    rgb(60, 54, 38)    /* from-ffxiv-gold/20 over dark */
  );
  border-radius: calc(0.5rem - 1px); /* Slightly smaller radius to match inset */
  z-index: 1;
  pointer-events: none;
}

/* Ensure all direct children of server-box-rotating-light are above the rotating light */
.server-box-rotating-light > * {
  position: relative;
  z-index: 2;
}

/* Silver flow effect for search prompt */
@keyframes silverFlow {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

.search-prompt-flow {
  position: relative;
  color: rgba(156, 163, 175, 0.8); /* gray-400 base color */
  display: inline-block;
}

.search-prompt-flow::before {
  content: attr(data-text);
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    270deg,
    transparent 0%,
    transparent 30%,
    rgba(255, 255, 255, 0.8) 45%,
    rgba(192, 192, 192, 0.9) 50%,
    rgba(255, 255, 255, 0.8) 55%,
    transparent 70%,
    transparent 100%
  );
  background-size: 200% 100%;
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: silverFlow 2.5s linear infinite;
  pointer-events: none;
}